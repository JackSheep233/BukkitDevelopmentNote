<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>代码中的MC世界 | Bukkit Development Note</title>
    <meta name="description" content="A guide to develop Minecraft Server plugins based on Bukkit.">
    <meta name="generator" content="VuePress 1.4.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    
    <link rel="preload" href="/BukkitDevelopmentNote/assets/css/0.styles.306dc64a.css" as="style"><link rel="preload" href="/BukkitDevelopmentNote/assets/js/app.2634dd99.js" as="script"><link rel="preload" href="/BukkitDevelopmentNote/assets/js/2.cc6e75aa.js" as="script"><link rel="preload" href="/BukkitDevelopmentNote/assets/js/11.44efa5f5.js" as="script"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/10.e1cfcf7a.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/12.3917c9a1.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/13.848a50a7.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/14.d3d0e1c2.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/15.3d1313bf.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/16.4dd55a1e.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/17.ece6e639.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/18.ac97681d.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/19.396f060b.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/20.90cd3f0c.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/21.f6b39766.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/22.938c6544.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/23.f53b8e95.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/24.c4052a83.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/25.f7321946.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/26.548249ca.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/27.e2b64422.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/28.ed2628f6.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/29.1c742d23.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/3.c1f93749.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/30.04dcb996.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/31.b2bccbe9.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/32.6ab03692.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/33.222886c9.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/34.fe917ab1.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/35.c3502896.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/36.62f3d555.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/37.39042c08.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/38.d83a6a0c.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/4.2f54bf03.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/5.ec88f9e9.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/6.8d881c35.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/7.4444e5b6.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/8.4b9b39e0.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/9.c2d8b702.js">
    <link rel="stylesheet" href="/BukkitDevelopmentNote/assets/css/0.styles.306dc64a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/BukkitDevelopmentNote/" class="home-link router-link-active"><!----> <span class="site-name">Bukkit Development Note</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/BukkitDevelopmentNote/home.html" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/BukkitDevelopmentNote/contribute.html" class="nav-link">
  贡献
</a></div><div class="nav-item"><a href="https://alpha.tdiant.net/donate.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  赞助
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/tdiant/BukkitDevelopmentNote" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub仓库
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/BukkitDevelopmentNote/home.html" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/BukkitDevelopmentNote/contribute.html" class="nav-link">
  贡献
</a></div><div class="nav-item"><a href="https://alpha.tdiant.net/donate.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  赞助
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/tdiant/BukkitDevelopmentNote" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub仓库
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/BukkitDevelopmentNote/home.html" class="sidebar-link">欢迎</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>第一部分: 基本概念</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/BukkitDevelopmentNote/unit/1-1.html" class="sidebar-link">写在前面</a></li><li><a href="/BukkitDevelopmentNote/unit/1-2.html" class="sidebar-link">MC的服务端介绍</a></li><li><a href="/BukkitDevelopmentNote/unit/1-3.html" class="active sidebar-link">代码中的MC世界</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/BukkitDevelopmentNote/unit/1-3.html#世界、方块与material" class="sidebar-link">世界、方块与Material</a></li><li class="sidebar-sub-header"><a href="/BukkitDevelopmentNote/unit/1-3.html#生物与位置对象-location" class="sidebar-link">生物与位置对象(Location)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/BukkitDevelopmentNote/unit/1-3.html#生物" class="sidebar-link">生物</a></li><li class="sidebar-sub-header"><a href="/BukkitDevelopmentNote/unit/1-3.html#location对象" class="sidebar-link">Location对象</a></li></ul></li><li class="sidebar-sub-header"><a href="/BukkitDevelopmentNote/unit/1-3.html#物品" class="sidebar-link">物品</a></li><li class="sidebar-sub-header"><a href="/BukkitDevelopmentNote/unit/1-3.html#事件系统" class="sidebar-link">事件系统</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/BukkitDevelopmentNote/unit/1-3.html#事件的概念" class="sidebar-link">事件的概念</a></li><li class="sidebar-sub-header"><a href="/BukkitDevelopmentNote/unit/1-3.html#事件的作用" class="sidebar-link">事件的作用</a></li><li class="sidebar-sub-header"><a href="/BukkitDevelopmentNote/unit/1-3.html#监听器" class="sidebar-link">监听器</a></li></ul></li><li class="sidebar-sub-header"><a href="/BukkitDevelopmentNote/unit/1-3.html#命令系统" class="sidebar-link">命令系统</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/BukkitDevelopmentNote/unit/1-3.html#命令" class="sidebar-link">命令</a></li><li class="sidebar-sub-header"><a href="/BukkitDevelopmentNote/unit/1-3.html#对命令的代码解析" class="sidebar-link">对命令的代码解析</a></li></ul></li><li class="sidebar-sub-header"><a href="/BukkitDevelopmentNote/unit/1-3.html#权限系统" class="sidebar-link">权限系统</a></li><li class="sidebar-sub-header"><a href="/BukkitDevelopmentNote/unit/1-3.html#配置api" class="sidebar-link">配置API</a></li><li class="sidebar-sub-header"><a href="/BukkitDevelopmentNote/unit/1-3.html#交流系统-conversation-api" class="sidebar-link">交流系统(Conversation API)</a></li><li class="sidebar-sub-header"><a href="/BukkitDevelopmentNote/unit/1-3.html#inventory" class="sidebar-link">Inventory</a></li><li class="sidebar-sub-header"><a href="/BukkitDevelopmentNote/unit/1-3.html#服务器底层" class="sidebar-link">服务器底层</a></li></ul></li><li><a href="/BukkitDevelopmentNote/unit/1-4.html" class="sidebar-link">检索需要的信息</a></li><li><a href="/BukkitDevelopmentNote/unit/1-5.html" class="sidebar-link">服务端与客户端</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>第二部分: 基础内容</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/BukkitDevelopmentNote/unit/2-1.html" class="sidebar-link">最简单的插件</a></li><li><a href="/BukkitDevelopmentNote/unit/2-2.html" class="sidebar-link">事件的监听</a></li><li><a href="/BukkitDevelopmentNote/unit/2-3.html" class="sidebar-link">配置API</a></li><li><a href="/BukkitDevelopmentNote/unit/2-4.html" class="sidebar-link">命令执行器</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>第三部分: 进阶功能</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/BukkitDevelopmentNote/unit/3-2.html" class="sidebar-link">自定义事件</a></li><li><a href="/BukkitDevelopmentNote/unit/3-3.html" class="sidebar-link">深入plugin.yml</a></li><li><a href="/BukkitDevelopmentNote/unit/3-4.html" class="sidebar-link">配置API的序列化和遍历</a></li><li><a href="/BukkitDevelopmentNote/unit/3-5.html" class="sidebar-link">多线程多任务框架</a></li><li><a href="/BukkitDevelopmentNote/unit/3-6.html" class="sidebar-link">自定义合成表</a></li><li><a href="/BukkitDevelopmentNote/unit/3-7.html" class="sidebar-link">粒子效果和音效播放</a></li><li><a href="/BukkitDevelopmentNote/unit/3-8.html" class="sidebar-link">世界生成器</a></li><li><a href="/BukkitDevelopmentNote/unit/3-9.html" class="sidebar-link">Title、Bar与计分板显示</a></li><li><a href="/BukkitDevelopmentNote/unit/3-10.html" class="sidebar-link">经验和成就</a></li><li><a href="/BukkitDevelopmentNote/unit/3-11.html" class="sidebar-link">插件系统基本玩法</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>第四部分: 常用依赖</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/BukkitDevelopmentNote/unit/4-1.html" class="sidebar-link">Vault</a></li><li><a href="/BukkitDevelopmentNote/unit/4-2.html" class="sidebar-link">ProtocolLib</a></li><li><a href="/BukkitDevelopmentNote/unit/4-3.html" class="sidebar-link">Bungeecord</a></li><li><a href="/BukkitDevelopmentNote/unit/4-4.html" class="sidebar-link">PlaceholderAPI</a></li><li><a href="/BukkitDevelopmentNote/unit/4-5.html" class="sidebar-link">VexView</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>第五部分: 底层部分</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/BukkitDevelopmentNote/unit/5-1.html" class="sidebar-link">认识NMS与OBC</a></li><li><a href="/BukkitDevelopmentNote/unit/5-2.html" class="sidebar-link">自定义发包</a></li><li><a href="/BukkitDevelopmentNote/unit/5-3.html" class="sidebar-link">NBT数据操作</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="代码中的mc世界"><a href="#代码中的mc世界" class="header-anchor">#</a> 代码中的MC世界</h1> <p>你一定是玩过MC的. 那你一定也能想象出来代码化的MC是什么样子.</p> <p>相信你有Java的开发经验的话, 一定了解JavaDoc的使用. SpigotMC官方提供了JavaDoc.</p> <blockquote><p>最新版本JavaDoc网址: <a href="https://hub.spigotmc.org/javadocs/spigot/index.html?overview-summary.html" target="_blank" rel="noopener noreferrer">https://hub.spigotmc.org/javadocs/spigot/index.html?overview-summary.html<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><br>
旧版本JavaDoc网址(1.7.10): <a href="http://jd.bukkit.org/" target="_blank" rel="noopener noreferrer">http://jd.bukkit.org/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>国内有一群热爱开发的人做出了中文JavaDoc, 开发时可以用以参考.<br>
最新版本中文JavaDoc网址: <a href="https://bukkit.windit.net/javadoc/" target="_blank" rel="noopener noreferrer">https://bukkit.windit.net/javadoc/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><br>
他们的GitHub地址: <a href="https://github.com/BukkitAPI-Translation-Group/Chinese_BukkitAPI" target="_blank" rel="noopener noreferrer">https://github.com/BukkitAPI-Translation-Group/Chinese_BukkitAPI<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>本章大致上按照JavaDoc上罗列的包的顺序来介绍BukkitAPI所提供的各个体系和系统.<br> <strong>本章仅仅是对各个系统做大概的描述. 后续会详细讲述各个部分的内容.</strong></p> <h2 id="世界、方块与material"><a href="#世界、方块与material" class="header-anchor">#</a> 世界、方块与Material</h2> <p>想也不用想, MC不可能把一整个世界都存到一个文件里去, 否则这样的一个文件该有多大!
事实上, 一个完整的世界分为了很多<code>Chunk</code>, 也就是区块. 每个区块都是X和Y为16*16的范围. 你可以认为一个世界由许多区块组成.</p> <p>在开发时, 我们把每个世界都看成一个<code>World</code>对象, 每个区块都看成一个<code>Chunk</code>对象.
如果我们想操作某个世界内的某个方块, 实际开发时我们可以直接调用<code>World</code>对象的方法, 而不用先寻找到<code>Chunk</code>再操作.
每个方块都是一个<code>Block</code>对象.</p> <p>在BukkitAPI中引入了“材质”(Material)的概念. 比如一个石头方块, 它的材质就是<code>STONE</code>, 如果一个物品的材质也是<code>STONE</code>, 那么这个物品就是玩家手上拿着的石头方块物品了.<br>
你可以为一个方块设置材质, 就像这样:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Block</span> b <span class="token operator">=</span> 方块<span class="token punctuation">;</span>
b<span class="token punctuation">.</span><span class="token function">setType</span><span class="token punctuation">(</span><span class="token class-name">Material</span><span class="token punctuation">.</span>STONE<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>想必你也能猜到了, 怎样在一个世界里“删除掉”一个方块:</p> <div class="language-java extra-class"><pre class="language-java"><code>b<span class="token punctuation">.</span><span class="token function">setType</span><span class="token punctuation">(</span><span class="token class-name">Material</span><span class="token punctuation">.</span>AIR<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//设置成空气就好了嘛</span>
</code></pre></div><p>方块与方块各不一样. 有些方块是带有特有属性和功能的. 比如告示牌上面有字. 事实上, <code>Block</code>类有许多子类, 每个告示牌方块无论是墙上的还是地上杵着的都是<code>Sign</code>对象. 比如你可以像这样修改告示牌上的字:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Block</span> b <span class="token operator">=</span> 你获取到的告示牌方块<span class="token punctuation">,</span> 你可以用getType判断一下它的<span class="token class-name">Material</span>是不是告示牌<span class="token punctuation">;</span>
<span class="token class-name">Sign</span> s <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Sign</span><span class="token punctuation">)</span>b<span class="token punctuation">;</span> <span class="token comment">//直接强制转换</span>
s<span class="token punctuation">.</span><span class="token function">setLine</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">&quot;测试&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//这样就把第一行修改成了字符串“测试”</span>
</code></pre></div><p><strong>BukkitAPI的包分类是清晰的, 所有的方块子类都在<code>org.bukkit.block</code>包内, 你完全可以利用JavaDoc, 找到所需的子类并查看用法. Material枚举量的具体内容也能查询到. 后续将不再赘述.</strong></p> <h2 id="生物与位置对象-location"><a href="#生物与位置对象-location" class="header-anchor">#</a> 生物与位置对象(Location)</h2> <h3 id="生物"><a href="#生物" class="header-anchor">#</a> 生物</h3> <p>在MC中, 所有的生物, 例如一只羊, 乃至一个僵尸, 又或者是玩家, 都是生物, 他们都是Entity类型的对象.<br>
这个概念还可以更加进一步的扩充, 一个被点燃的TNT, 实际上, 它也是一个实体(TNTPrimed对象).</p> <p>当然, 与方块<code>Block</code>类类似, <code>Entity</code>拥有很多子类. 这其中最显眼的一个子类就是<code>Player</code>类了.
<code>Player</code>类代表玩家, 每个<strong>在线的玩家</strong>都有一个<code>Player</code>对象. 其实也不难理解, 如果一个玩家下线了, 那么这个玩家对应的实体当然也会消失. 你也许会纳闷, 那如何去操作一个目前不在线的玩家的数据呢? 这是个比较复杂的问题, 需要分成多个情况来解决, 这里暂不赘述.</p> <h3 id="location对象"><a href="#location对象" class="header-anchor">#</a> Location对象</h3> <p>任何一个坐标都可由一个Location代表.<br>
常见的实体对象是Entity的子类，故都提供了<code>getLocation</code>方法，返回的<code>Location</code>对象代表着它们的坐标位置.<br>
值得一提的是，如果应用<code>getLocation</code>获取实体位置，那么获取的位置是它的脚. 例如<code>Player.getLocation()</code>所获取的是玩家的脚的位置.<br>
对于这些实体对象，如果想修改他们所在的坐标位置，Bukkit没有提供<code>setLocation</code>方法，而是提供了<code>teleport</code>方法. 通过<code>teleport</code>方法可以传送某个实体.</p> <p><strong>BlockLocation</strong><br>
Location中提供了<code>getBlockLocation()</code>、<code>getBlockX()</code>、<code>getBlockY()</code>、<code>getBlockZ()</code>四个方法.<br>
对于一个方块而言，其坐标的XYZ值均为整数，所以这些方法所获取的是此Location对应的最精确方块的坐标.<br>
通俗的理解，可以认为获取的是将XYZ四舍五入后的坐标值.<br> <code>getBlock()</code>获取的此Location对应的最精确的方块的<code>Block</code>对象.</p> <p><strong>坐标运算</strong><br>
Location提供<code>add</code>（加）、<code>subtract</code>（减）方法.</p> <p><strong>两点间距离</strong>
Location提供<code>distance</code>方法，参数为另一个Location，返回值为double，代表两点间距离.<br> <em>Location还提供<code>distanceSquared</code>方法，代表两点间的方块距离，遵循四舍五入.</em></p> <h2 id="物品"><a href="#物品" class="header-anchor">#</a> 物品</h2> <p>玩家手里拿着的东西叫物品. 物品的材质也叫<code>Material</code>.<br>
特殊的是, 某些物品与其对应的方块<code>Material</code>不一致, 例如红石比较器.<br>
红石比较器物品的种类是<code>Material.REDSTONE_COMPARATOR</code>, 而放置后的方块种类又分为<code>Material.REDSTONE_COMPARATOR_ON</code>(开启状态), <code>Material.REDSTONE_COMPARATOR_OFF</code>(关闭状态)两种, 红石比较器方块的种类不能用<code>Material.REDSTONE_COMPARATOR</code>来表示.</p> <p><code>ItemStack</code>用于反应一种描述物品堆叠的方式.<br>
一个<code>ItemStack</code>的实例, 囊括了物品的种类（其对应的<code>Material</code>）和数量等信息.<br>
例如, 玩家手中拿着三个苹果. 玩家手中的这三个苹果, 实质上是一个<code>ItemStack</code>, 它包括了这三个苹果的种类（<code>Material.APPLE</code>）、数量（<code>3</code>）与其他的一些信息.</p> <h2 id="事件系统"><a href="#事件系统" class="header-anchor">#</a> 事件系统</h2> <h3 id="事件的概念"><a href="#事件的概念" class="header-anchor">#</a> 事件的概念</h3> <p>事件是服务器里发生的事.
例如, 天气的变化, 玩家的移动. 玩家把树打掉, 又捡起了掉落地上的原木. 这些都是事件.</p> <p>事件分为可控事件和不可控事件. 其最大区别在于能不能取消(也就是能不能setCancelled).
不难理解, 玩家如果退出服务器, 这不能被取消, 它是不可控事件. 玩家的移动可以被取消, 它是可控事件.</p> <h3 id="事件的作用"><a href="#事件的作用" class="header-anchor">#</a> 事件的作用</h3> <p>利用BukkitAPI, 你可以监听事件, 事件触发时执行某些代码.<br>
例如, 你可以监听玩家登录服务器, 玩家登录服务器后你可以执行某些代码.</p> <p>那么, 如果你想写登录插件, 你需要监听玩家登录服务器的事件.<br>
玩家进入服务器以后, 记录存储起来他的用户名. 等待玩家输入指令进行登录, 登录完毕以后去掉他的用户名.<br>
然后再监听其他的各种事件(比如监听方块破坏事件), 如果这些事件被触发, 判断是哪个玩家触发的, 看看玩家用户名有没有存储起来, 如果有, 那么他没有登录, 那就把这个事件取消掉.</p> <p>通过这样的例子可以发现, 事件是一个插件最重要的组成部分!</p> <h3 id="监听器"><a href="#监听器" class="header-anchor">#</a> 监听器</h3> <p>上面我们提到可以实现事件触发时执行某些代码. 实现这个目的的方法就是写一个监听器.
监听器实质上是一个实现了<code>Listener</code>的类, 其中包含一些带有<code>@EventHandler</code>注解的方法.</p> <p>一个监听器大致是这样:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoListener</span> <span class="token keyword">implements</span> <span class="token class-name">Listener</span> <span class="token punctuation">{</span> <span class="token comment">//这是你定义的监听器类, 实现了Listener接口</span>
    <span class="token annotation punctuation">@Listener</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onPlayerMove</span><span class="token punctuation">(</span><span class="token class-name">PlayerMoveEvent</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span> 
        <span class="token comment">//比如我监听了玩家移动事件, 就应该这样创建一个这样的方法</span>
        <span class="token comment">//带有Listener注解, 参数是一个PlayerMoveEvent类型的参数, 代表你要监听的是PlayerMoveEvent事件</span>
        <span class="token comment">//一个方法只能监听一个事件</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>监听器类创建完毕后, 还需要注册它才可以真正发挥作用.</p> <h2 id="命令系统"><a href="#命令系统" class="header-anchor">#</a> 命令系统</h2> <h3 id="命令"><a href="#命令" class="header-anchor">#</a> 命令</h3> <p>MC中的命令是一个字符串, 用来实现游戏内高级功能.</p> <p>在MC客户端中, 玩家将在聊天框内输入命令.
当且仅当在“聊天”内, 命令与普通的聊天内容的区别在于其内容的第一个字符是一个斜杠<code>/</code>.</p> <h3 id="对命令的代码解析"><a href="#对命令的代码解析" class="header-anchor">#</a> 对命令的代码解析</h3> <p>例如玩家依次输入了这些命令:</p> <div class="language- extra-class"><pre class="language-text"><code>/abc
/abc test 1
/def create info username
</code></pre></div><p>依次分析, 第一种和第二种<strong>并不是两种命令</strong>, 区分不同的命令看紧跟斜杠的词是什么, 所以第一个和第二个本质上是同一个命令.</p> <p>按照一个空格一个分隔的规律, 开头的一节为命令的名称, 第二个以及第二个以后的部分都是这条命令带的参数, 也就是输入这条命令的人想要传递的数据信息部分.<br>
参数部分可以表示成一个String数组, 以第三个命令为例, 参数部分可以表示为:</p> <div class="language- extra-class"><pre class="language-text"><code>args[0]: &quot;create&quot;
args[1]: &quot;info&quot;
args[2]: &quot;username&quot;
</code></pre></div><p>假如你想实现一个命令, 玩家必须输入参数, 参数第一项是固定的几种答案, 你完全可以对args做些if判断来实现.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">if</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span>length<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//玩家没有输入参数</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;固定答案1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//玩家输入了 /命令名 固定答案1 格式的命令</span>
        <span class="token comment">//你想实现的功能</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;固定答案2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//玩家输入了 /命令名 固定答案2 格式的命令</span>
        <span class="token comment">//你想实现的功能</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">//玩家没有输入固定的答案类型</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="权限系统"><a href="#权限系统" class="header-anchor">#</a> 权限系统</h2> <p>BukkitAPI提供了一套权限系统.<br>
利用权限系统, 你可以实现限制有某个权限的玩家能输入某个指令、做某些事情等功能, 但没有这一权限的玩家却做不了.</p> <p>权限一般是指一串字符串, 一般(最好遵守这样的格式)格式是<code>插件名.功能名.某一个项目的名称.xxx</code>构成, 需全为英文小写. 例如<code>testplugin.block.place</code>.<br> <code>Player</code>类有<code>hasPermission</code>方法可以检查某个玩家是否有某个权限.</p> <h2 id="配置api"><a href="#配置api" class="header-anchor">#</a> 配置API</h2> <h2 id="交流系统-conversation-api"><a href="#交流系统-conversation-api" class="header-anchor">#</a> 交流系统(Conversation API)</h2> <p>需要注意的是, 虽然有这样的API, 但这一API在实际开发中使用频率很低.</p> <p>如果你使用过<code>QuickShop</code>插件, 你可能会对这一功能有印象:<br>
玩家创建了一个箱子商店, 当另一个玩家点击箱子方块前面的告示牌时, 在聊天区域会显示出商品的详情和价格, 并提示你直接在聊天区输入一个数字代表购买物品, 发送这个数字就可以购买了.<br>
如果你细细琢磨一下这一功能, 其实你可以把这一过程看成一种对话, 你和插件可以直接在聊天区内进行交流:</p> <blockquote><p>插件: 你好, 你需要多少A商品?
你: 2
插件: 好的, 购买成功!</p></blockquote> <p>其实这就是一个<code>Conversation</code>了. 你可以把这样的一个对话过程做成一个<code>Prompt</code>(可以把这个理解成对话的模板), 然后在需要的时候依照这个<code>Prompt</code>生产一个<code>Conversation</code>, 并给一个玩家开始对话, 过程就像这样:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Player</span> p <span class="token operator">=</span> 玩家<span class="token punctuation">;</span>
<span class="token comment">//一些生成Conversation对象的代码之后</span>
<span class="token class-name">Conversation</span> c <span class="token operator">=</span> 你根据<span class="token class-name">Prompt</span>生产出的<span class="token class-name">Conversation</span>对象<span class="token punctuation">;</span>
c<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//开始对话</span>
</code></pre></div><h2 id="inventory"><a href="#inventory" class="header-anchor">#</a> Inventory</h2> <p>对于玩家背包、箱子里存放的所有<code>ItemStack</code>对象, 我们可以认为他们都储存在了一个<code>Inventory</code>对象里.<br>
也就是意味着, 一个箱子、一个玩家都对应他们专属的<code>Inventory</code>对象, 用来储存它们存放着的物品.</p> <h2 id="服务器底层"><a href="#服务器底层" class="header-anchor">#</a> 服务器底层</h2> <p>我们把原版服务端部分(全部都在<code>net.minecraft.server</code>包内)叫做<code>NMS</code>. 把Bukkit部分的底层实现部分(也就是CraftBukkit部分, 全部都在<code>org.bukkit.craftbukkit</code>包内)叫做<code>OBC</code>.<br>
有时候我们需要手工发送某些数据包来达到某些目的, 这时需要对底层代码进行操作. 通常不常操作OBC.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/BukkitDevelopmentNote/unit/1-2.html" class="prev">
        MC的服务端介绍
      </a></span> <span class="next"><a href="/BukkitDevelopmentNote/unit/1-4.html">
        检索需要的信息
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/BukkitDevelopmentNote/assets/js/app.2634dd99.js" defer></script><script src="/BukkitDevelopmentNote/assets/js/2.cc6e75aa.js" defer></script><script src="/BukkitDevelopmentNote/assets/js/11.44efa5f5.js" defer></script>
  </body>
</html>
