<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>深入plugin.yml | Bukkit Development Note</title>
    <meta name="description" content="A guide to develop Minecraft Server plugins based on Bukkit.">
    <meta name="generator" content="VuePress 1.4.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    
    <link rel="preload" href="/BukkitDevelopmentNote/assets/css/0.styles.306dc64a.css" as="style"><link rel="preload" href="/BukkitDevelopmentNote/assets/js/app.2634dd99.js" as="script"><link rel="preload" href="/BukkitDevelopmentNote/assets/js/2.cc6e75aa.js" as="script"><link rel="preload" href="/BukkitDevelopmentNote/assets/js/22.938c6544.js" as="script"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/10.e1cfcf7a.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/11.44efa5f5.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/12.3917c9a1.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/13.848a50a7.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/14.d3d0e1c2.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/15.3d1313bf.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/16.4dd55a1e.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/17.ece6e639.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/18.ac97681d.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/19.396f060b.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/20.90cd3f0c.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/21.f6b39766.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/23.f53b8e95.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/24.c4052a83.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/25.f7321946.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/26.548249ca.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/27.e2b64422.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/28.ed2628f6.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/29.1c742d23.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/3.c1f93749.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/30.04dcb996.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/31.b2bccbe9.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/32.6ab03692.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/33.222886c9.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/34.fe917ab1.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/35.c3502896.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/36.62f3d555.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/37.39042c08.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/38.d83a6a0c.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/4.2f54bf03.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/5.ec88f9e9.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/6.8d881c35.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/7.4444e5b6.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/8.4b9b39e0.js"><link rel="prefetch" href="/BukkitDevelopmentNote/assets/js/9.c2d8b702.js">
    <link rel="stylesheet" href="/BukkitDevelopmentNote/assets/css/0.styles.306dc64a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/BukkitDevelopmentNote/" class="home-link router-link-active"><!----> <span class="site-name">Bukkit Development Note</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/BukkitDevelopmentNote/home.html" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/BukkitDevelopmentNote/contribute.html" class="nav-link">
  贡献
</a></div><div class="nav-item"><a href="https://alpha.tdiant.net/donate.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  赞助
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/tdiant/BukkitDevelopmentNote" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub仓库
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/BukkitDevelopmentNote/home.html" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/BukkitDevelopmentNote/contribute.html" class="nav-link">
  贡献
</a></div><div class="nav-item"><a href="https://alpha.tdiant.net/donate.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  赞助
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/tdiant/BukkitDevelopmentNote" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub仓库
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/BukkitDevelopmentNote/home.html" class="sidebar-link">欢迎</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>第一部分: 基本概念</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/BukkitDevelopmentNote/unit/1-1.html" class="sidebar-link">写在前面</a></li><li><a href="/BukkitDevelopmentNote/unit/1-2.html" class="sidebar-link">MC的服务端介绍</a></li><li><a href="/BukkitDevelopmentNote/unit/1-3.html" class="sidebar-link">代码中的MC世界</a></li><li><a href="/BukkitDevelopmentNote/unit/1-4.html" class="sidebar-link">检索需要的信息</a></li><li><a href="/BukkitDevelopmentNote/unit/1-5.html" class="sidebar-link">服务端与客户端</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>第二部分: 基础内容</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/BukkitDevelopmentNote/unit/2-1.html" class="sidebar-link">最简单的插件</a></li><li><a href="/BukkitDevelopmentNote/unit/2-2.html" class="sidebar-link">事件的监听</a></li><li><a href="/BukkitDevelopmentNote/unit/2-3.html" class="sidebar-link">配置API</a></li><li><a href="/BukkitDevelopmentNote/unit/2-4.html" class="sidebar-link">命令执行器</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>第三部分: 进阶功能</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/BukkitDevelopmentNote/unit/3-2.html" class="sidebar-link">自定义事件</a></li><li><a href="/BukkitDevelopmentNote/unit/3-3.html" class="active sidebar-link">深入plugin.yml</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/BukkitDevelopmentNote/unit/3-3.html#必要设置项" class="sidebar-link">必要设置项</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/BukkitDevelopmentNote/unit/3-3.html#name" class="sidebar-link">name</a></li><li class="sidebar-sub-header"><a href="/BukkitDevelopmentNote/unit/3-3.html#version" class="sidebar-link">version</a></li><li class="sidebar-sub-header"><a href="/BukkitDevelopmentNote/unit/3-3.html#main" class="sidebar-link">main</a></li></ul></li><li class="sidebar-sub-header"><a href="/BukkitDevelopmentNote/unit/3-3.html#可选设置项" class="sidebar-link">可选设置项</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/BukkitDevelopmentNote/unit/3-3.html#依赖" class="sidebar-link">依赖</a></li><li class="sidebar-sub-header"><a href="/BukkitDevelopmentNote/unit/3-3.html#loadbefore" class="sidebar-link">loadbefore</a></li><li class="sidebar-sub-header"><a href="/BukkitDevelopmentNote/unit/3-3.html#commands" class="sidebar-link">commands</a></li><li class="sidebar-sub-header"><a href="/BukkitDevelopmentNote/unit/3-3.html#author与authors" class="sidebar-link">author与authors</a></li></ul></li></ul></li><li><a href="/BukkitDevelopmentNote/unit/3-4.html" class="sidebar-link">配置API的序列化和遍历</a></li><li><a href="/BukkitDevelopmentNote/unit/3-5.html" class="sidebar-link">多线程多任务框架</a></li><li><a href="/BukkitDevelopmentNote/unit/3-6.html" class="sidebar-link">自定义合成表</a></li><li><a href="/BukkitDevelopmentNote/unit/3-7.html" class="sidebar-link">粒子效果和音效播放</a></li><li><a href="/BukkitDevelopmentNote/unit/3-8.html" class="sidebar-link">世界生成器</a></li><li><a href="/BukkitDevelopmentNote/unit/3-9.html" class="sidebar-link">Title、Bar与计分板显示</a></li><li><a href="/BukkitDevelopmentNote/unit/3-10.html" class="sidebar-link">经验和成就</a></li><li><a href="/BukkitDevelopmentNote/unit/3-11.html" class="sidebar-link">插件系统基本玩法</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>第四部分: 常用依赖</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/BukkitDevelopmentNote/unit/4-1.html" class="sidebar-link">Vault</a></li><li><a href="/BukkitDevelopmentNote/unit/4-2.html" class="sidebar-link">ProtocolLib</a></li><li><a href="/BukkitDevelopmentNote/unit/4-3.html" class="sidebar-link">Bungeecord</a></li><li><a href="/BukkitDevelopmentNote/unit/4-4.html" class="sidebar-link">PlaceholderAPI</a></li><li><a href="/BukkitDevelopmentNote/unit/4-5.html" class="sidebar-link">VexView</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>第五部分: 底层部分</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/BukkitDevelopmentNote/unit/5-1.html" class="sidebar-link">认识NMS与OBC</a></li><li><a href="/BukkitDevelopmentNote/unit/5-2.html" class="sidebar-link">自定义发包</a></li><li><a href="/BukkitDevelopmentNote/unit/5-3.html" class="sidebar-link">NBT数据操作</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="深入plugin-yml"><a href="#深入plugin-yml" class="header-anchor">#</a> 深入plugin.yml</h1> <p><code>plugin.yml</code>文件是Bukkit及其衍生服务端识别插件的重要文件.</p> <p>在服务端加载插件时, 服务端加载完毕Jar文件后做的第一件事就是读取该Jar文件的<code>plugin.yml</code>文件.<br>
如果把任一可正常工作的插件的Jar文件用相应的ZIP压缩软件打开, 删除<code>plugin.yml</code>文件后再启动服务端, 会抛出错误.</p> <div class="language- extra-class"><pre class="language-text"><code>Could not load 'plugins\[YOUR_PLUGIN].jar' in folder 'plugins'  
org.bukkit.plugin.InvalidDescriptionException: Invalid plugin.yml  
</code></pre></div><p>可发现, 服务端将会因为没有<code>plugin.yml</code>文件而抛出<code>InvalidDescriptionException</code>错误.</p> <br> <p>在<code>plugin.yml</code>文件中, 目前我们已知的有<code>name</code>、<code>version</code>、<code>main</code>、<code>author</code>四个项目可以设置.<br>
事实上, <code>plugin.yml</code>文件中还有许多可以设置的项目, 部分项目是本节的内容, 其余可以在SpigotMC的官方文档中查阅到.</p> <blockquote><p>目前BukkitAPI主要由SpigotMC维护, 因此大量的BukkitAPI文档都在 SpigotMC 网站上.<br>
有关plugin.yml文件的官方文档在这里:<br>
https://www.spigotmc.org/wiki/plugin-yml/</p></blockquote> <h2 id="必要设置项"><a href="#必要设置项" class="header-anchor">#</a> 必要设置项</h2> <p><code>plugin.yml</code>文件中, <code>name</code>、<code>main</code>、<code>version</code>三项必须存在.<br> <em>这也意味着, 前面的实例中, 我们使用的<code>plugin.yml</code>文件, 删去<code>author</code>键仍可被服务端正常加载.</em></p> <p>不妨来认识一下这三个设置项.</p> <h3 id="name"><a href="#name" class="header-anchor">#</a> name</h3> <p>顾名思义, 它定义了插件的名称.</p> <p>对于名称, 官方WIKI中给出了严格的要求, 即只能由 <strong>英文小写或大写字符、阿拉伯数字或下划线</strong> 构成. 决不能出现中文字符、空格等.<br>
在后续生成插件配置文件夹时, 该项设置的插件名将会是插件配置文件夹的名称.</p> <p>起名的时候应该注意, 尽可能起一个“个性”的名称, 防止与其他插件重名.</p> <h3 id="version"><a href="#version" class="header-anchor">#</a> version</h3> <p>指插件的版本号.<br>
该键理论上可以在后面填写任意String内容. 但是官方WIKI要求尽可能使用X.X.X格式的版本号表示(例如: 2.3.3).<br>
关于版本号规则，可以参考<a href="https://semver.org/lang/zh-CN/" target="_blank" rel="noopener noreferrer">语义化版本<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="main"><a href="#main" class="header-anchor">#</a> main</h3> <p>指插件的主类名.</p> <p>在插件中, 主类有且只有一个, 且需要继承<code>JavaPlugin</code>类. 主类是插件的“入口”, 这里的<code>main</code>即意在说明主类的名称.<br>
这里需填写主类的全名, 也就是精确到主类所在的具体包. 说白了就是不只是需要把主类名带上, 还要把包名带上.</p> <h2 id="可选设置项"><a href="#可选设置项" class="header-anchor">#</a> 可选设置项</h2> <p><code>plugin.yml</code>文件只需要存在必要设置项的三个键即可.<br>
下面的键可选, 可有可无. 但有一些在一些特定的情况下必须要有.</p> <h3 id="依赖"><a href="#依赖" class="header-anchor">#</a> 依赖</h3> <p>有时候你的插件可能需要调用<code>Vault</code>（用来获取玩家货币余额）或其他的插件, 即依赖其他插件.<br>
这时候需要在<code>plugin.yml</code>文件中进行设置告知服务端, 从而保证所依赖的插件在本插件之前被加载.</p> <p>你可以在<code>plugin.yml</code>文件中加入<code>depend</code>键或<code>softdepend</code>键来控制依赖.</p> <p><code>depend</code>键或<code>softdepend</code>键接的值必须是数组. 例如这样:</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">depend</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>Vault<span class="token punctuation">,</span> WorldEdit<span class="token punctuation">]</span>
<span class="token key atrule">softdepend</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>Essentials<span class="token punctuation">]</span>
</code></pre></div><p>两个键设置的内容区别如下：</p> <ol><li>depend: 插件强制要求的依赖. 如果没有这个插件, 该插件将无法正常工作, Bukkit此时会抛出相应错误.</li> <li>softdepend: 插件不强制要求的插件. 如果服务端内没有这个插件, 插件仍可正常工作.</li></ol> <p>后面设置的数组内的内容都是所依赖插件的名称, 此处名称应与所依赖的插件的<code>plugin.yml</code>文件的<code>name</code>键的值相同.</p> <h3 id="loadbefore"><a href="#loadbefore" class="header-anchor">#</a> loadbefore</h3> <p><code>depend</code>与<code>softdepend</code>可以实现插件在某个插件之后加载. 但也许有时你的插件可能需要实现在某个插件之前被加载.<br>
此时你可以使用<code>loadbefore</code>设置, 用法类似. 例如:</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">loadbefore</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>Essentials<span class="token punctuation">,</span> WorldEdit<span class="token punctuation">]</span>
</code></pre></div><p>在上面的例子中, 可保证插件在WorldEdit与Essentials插件之前被加载.</p> <h3 id="commands"><a href="#commands" class="header-anchor">#</a> commands</h3> <p>如果你的插件定义了新指令, 你第一步就需要设置该项告知服务端.<br>
此处仅做示范:</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">commands</span><span class="token punctuation">:</span>
  <span class="token key atrule">test</span><span class="token punctuation">:</span>
    <span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">&quot;Hello World!&quot;</span>
</code></pre></div><p>这可以告知服务端注册了指令<code>test</code>, 并且描述为<code>Hello World!</code>字符串, 该描述字符串将会在<code>/help</code>指令中被显示.</p> <h3 id="author与authors"><a href="#author与authors" class="header-anchor">#</a> author与authors</h3> <p>此处不再赘述其作用.  如果你想表示多名作者, 你可以设置<code>authors</code>项, 值需为一个数组.</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">authors</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>tdiant<span class="token punctuation">,</span> Seraph_JACK<span class="token punctuation">]</span>
</code></pre></div><p>如果同时存在<code>author</code>与<code>authors</code>, 将忽略<code>author</code>.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/BukkitDevelopmentNote/unit/3-2.html" class="prev">
        自定义事件
      </a></span> <span class="next"><a href="/BukkitDevelopmentNote/unit/3-4.html">
        配置API的序列化和遍历
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/BukkitDevelopmentNote/assets/js/app.2634dd99.js" defer></script><script src="/BukkitDevelopmentNote/assets/js/2.cc6e75aa.js" defer></script><script src="/BukkitDevelopmentNote/assets/js/22.938c6544.js" defer></script>
  </body>
</html>
